
<!DOCTYPE html>
<html class="govuk-template govuk-template--rebranded" lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Versioning in the GOV.UK Prototype Kit - Prototype guidance - Design resources for HMRC — GOV.UK</title>
  <link rel="icon" href="/extension-assets/govuk-frontend/dist/govuk/assets/rebrand/images/favicon.ico">
  <link type="text/css" rel="stylesheet" href="/hmrc-design-system.min.css">
</head>

<body class="govuk-template__body">

  <a href="#main-content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

  
  <!-- TODO: tidy up the below -->
  <div class="app-pane app-pane--enabled">
  <div class="app-pane__header">
    

<header class="hmrc-internal-header">
  <div class="govuk-width-container">
    <div class="hmrc-internal-header__logo">
      <a href="https://www.gov.uk/government/organisations/hm-revenue-customs" class="hmrc-internal-header__logo-link">
        
          <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 45.35 45.35" focusable="false" aria-hidden="true">
            <path class="cls-1" d="m28.5,16.6c.82-.34,1.22-1.29.88-2.12-.34-.83-1.3-1.24-2.12-.9-.84.34-1.23,1.31-.89,2.14.34.83,1.3,1.23,2.14.88Z"/>
            <path class="cls-1" d="m22.06,19.36c-.84.34-1.23,1.31-.89,2.14.34.83,1.3,1.23,2.14.88.82-.34,1.22-1.29.88-2.12-.34-.83-1.3-1.24-2.12-.9Z"/>
            <path class="cls-1" d="m32.86,19.2c.82-.34,1.22-1.29.88-2.12-.34-.83-1.3-1.24-2.12-.9-.84.34-1.23,1.31-.89,2.14.34.83,1.3,1.23,2.14.88Z"/>
            <path class="cls-1" d="m33.62,22.63c.34.83,1.3,1.23,2.14.88.82-.34,1.22-1.29.88-2.12-.34-.83-1.3-1.24-2.12-.9-.84.34-1.23,1.31-.89,2.14Z"/>
            <path class="cls-1" d="m21.81,11.4c.06.08.13.15.21.21l-1.19,3.58s0,0,0,.01h0s0,0,0,0c-.06.18-.09.37-.09.56,0,.97.71,1.77,1.64,1.9.01,0,.03,0,.04,0,.08.01.16.02.24.02h0c.08,0,.16,0,.24-.02.01,0,.03,0,.04,0,.93-.14,1.64-.94,1.64-1.9,0-.2-.03-.39-.08-.56h0s0,0,0,0c0,0,0,0,0-.01l-1.19-3.58c.08-.06.15-.13.21-.21h0s2.06,1.08,2.06,1.08v-3.04l-2.06.65h0c-.06-.08-.12-.15-.2-.21h0s.83-2.62.83-2.62h-1.49s-1.49,0-1.49,0l.83,2.61h0c-.08.06-.14.13-.2.21h0s-2.06-.65-2.06-.65v3.04l2.06-1.08h0Z"/>
            <path class="cls-1" d="m16.83,16.6c.84.35,1.79-.05,2.14-.88.34-.83-.05-1.79-.89-2.14-.82-.34-1.78.07-2.12.9-.34.83.05,1.78.88,2.12Z"/>
            <path class="cls-1" d="m12.46,19.2c.84.35,1.79-.05,2.14-.88.34-.83-.05-1.79-.89-2.14-.82-.34-1.78.07-2.12.9-.34.83.05,1.78.88,2.12Z"/>
            <path class="cls-1" d="m9.57,23.51c.84.35,1.79-.05,2.14-.88.34-.83-.05-1.79-.89-2.14-.82-.34-1.78.07-2.12.9-.34.83.05,1.78.88,2.12Z"/>
            <path class="cls-1" d="m34.61,25.35c.22,1.12.26,1.65,0,2.37-.37-.36-.71-1.01-.98-2.02l-1.07,3.57c.65-.45,1.16-.74,1.73-.75-1.02,2.2-2.3,2.77-3.12,2.61-1.01-.19-1.47-1.09-1.32-1.85.23-1.08,1.34-1.36,1.86-.11.99-2.02-.69-2.65-1.77-2.05,1.66-1.66,1.85-3.13.51-4.92-1.87,1.43-1.89,2.84-1.05,4.84-1.09-1.25-2.79-.58-2.18,1.44.79-1.22,1.83-.45,1.67.71-.14,1.01-1.47,1.82-3.13,1.68-2.38-.22-2.52-1.86-2.58-3.21.58-.11,1.64.43,2.53,1.69l.33-3.79c-.98,1.02-1.86,1.21-2.85,1.24.33-1.02,1.84-2.7,1.84-2.7h-4.73s1.51,1.68,1.84,2.7c-.99-.03-1.87-.22-2.85-1.24l.33,3.79c.9-1.26,1.95-1.8,2.53-1.69-.06,1.36-.2,3-2.58,3.21-1.66.14-2.99-.67-3.13-1.68-.16-1.16.88-1.92,1.67-.71.61-2.02-1.09-2.69-2.18-1.44.84-1.99.82-3.41-1.05-4.84-1.34,1.78-1.15,3.26.51,4.92-1.08-.6-2.76.03-1.77,2.05.52-1.26,1.63-.98,1.86.11.16.76-.31,1.66-1.32,1.85-.83.15-2.1-.41-3.12-2.61.58.01,1.08.3,1.73.75l-1.07-3.57c-.27,1-.62,1.66-.98,2.02-.25-.72-.21-1.25,0-2.37l-2.21.79c1.18,1.6,2.31,3.86,3.25,7.79,3.29-.47,6.99-.74,10.9-.74s7.61.26,10.9.74c.94-3.93,2.07-6.19,3.25-7.79l-2.21-.79Z"/>
            <path class="cls-1" d="m22.68.57C10.47.57.57,10.47.57,22.68s9.9,22.11,22.11,22.11,22.11-9.9,22.11-22.11S34.89.57,22.68.57Zm0,41.69c-10.81,0-19.58-8.77-19.58-19.58S11.86,3.1,22.68,3.1s19.58,8.77,19.58,19.58-8.77,19.58-19.58,19.58Z"/>
          </svg>
        
        <span class="hmrc-internal-header__logo-text">
          HM Revenue &amp; Customs
        </span>
      </a>
    </div><div class="hmrc-internal-header__service-name">
      
        <a href="/" class="hmrc-internal-header__link">
          Design resources
        </a>
      
    </div></div>
</header>


  </div>

  <div class="app-pane__body govuk-width-container">

    
    
    <div data-module="subnav-toggle">
      <div class="app-subnav-toggle">
        <button hidden aria-controls="app-navigation" class="app-subnav-toggle__button">Menu</button>
      </div>

        <nav role="navigation" aria-labelledby="nav-header" class="app-pane__subnav" id="app-navigation">

          <h2 class="govuk-heading-m govuk-visually-hidden" id="nav-header"><a href="/prototype-guidance/">Pages in this section</a></h2>

          <div class="app-subnav"><ul class="app-subnav__section"><li class="app-subnav__section-item">
                      <a class="app-subnav__link govuk-link" href="/prototype-guidance/installing-prototype-kit">
                        Installing the prototype kit
                      </a>
                    </li><li class="app-subnav__section-item">
                      <a class="app-subnav__link govuk-link" href="/prototype-guidance/vs-code">
                        Setting up Visual Studio Code
                      </a>
                    </li><li class="app-subnav__section-item">
                      <a class="app-subnav__link govuk-link" href="/prototype-guidance/getting-started-html-css">
                        Getting started with HTML and CSS
                      </a>
                    </li><li class="app-subnav__section-item">
                      <a class="app-subnav__link govuk-link" href="/prototype-guidance/using-github">
                        Using GitHub
                      </a>
                    </li><li class="app-subnav__section-item app-subnav__section-item--current">
                      <a class="app-subnav__link govuk-link" href="/prototype-guidance/setting-up-different-versions-of-your-prototype">
                        Setting up different versions of your prototype
                      </a>
                    </li><li class="app-subnav__section-item">
                      <a class="app-subnav__link govuk-link" href="/prototype-guidance/show-different-pages-based-on-answers">
                        Show different pages based on user answers
                      </a>
                    </li><li class="app-subnav__section-item">
                      <a class="app-subnav__link govuk-link" href="/prototype-guidance/where-to-go-for-support">
                        Where to go for support
                      </a>
                    </li></ul></div>
        </nav>
    </div>
    <div class="app-pane__content">
      
        <a href="javascript:history.back()" class="govuk-back-link">Back</a>

      

      <main class="app-content" id="main-content">
        <div class="govuk-grid-row">
          <div class="govuk-grid-column-full">
            <header class="hmrc-page-heading">
  <h1 class="govuk-heading-xl">Versioning in the GOV.UK Prototype Kit</h1></header>


            
  
  


<p class="govuk-body">Versioning allows you to maintain multiple iterations of your prototype without affecting previous versions.</p>

<p class="govuk-body">This is particularly useful for:</p>
<ul class="govuk-list govuk-list--bullet">
  <li>user research — keep an older version live while testing a new one</li>
  <li>stakeholder feedback — compare multiple versions side-by-side to collaborate more effectively</li>
  <li>incremental changes — modify and improve designs easily without breaking existing functionality</li>
</ul>

<p class="govuk-body">It’s important to keep track of what changes you make and why. Consider using an index page to note these down or a separate changelog.</p>

<h2 class="govuk-heading-l">Key features</h2>

<ul class="govuk-list govuk-list--bullet">
  <li>version-agnostic forms — HTML forms do not require hardcoded <code class="govuk-code">action</code> attributes</li>
  <li>automated routing and redirects — a function automatically prefixes all redirects</li>
  <li>scalable and maintainable — adding a new version is straightforward</li>
</ul>

<h2 class="govuk-heading-l">Folder structure</h2>

    <div class="app-code-snippet">
      <pre ><code class="govuk-body-s">/project-root
├── app/
│   ├── routes.js
│   └── views/
│       ├── v1/
│       │   ├── routing.js
│       │   ├── question-1.html
│       │   ├── question-2.html
│       │   └── nested/
│       │       ├── question-1.html
│       │       └── question-2.html
│       └── v2/
│           ├── routing.js
│           ├── question-1.html
│           └── question-2.html</code></pre>
    </div>


<ul class="govuk-list govuk-list--bullet">
  <li><code class="govuk-code">routes.js</code> — this is the central routing file, it mounts each version’s router under its respective path (such as, <code class="govuk-code">/v1</code> or <code class="govuk-code">/v2</code>)</li>
  <li><code class="govuk-code">routing.js</code> — these files define the routes and ensure that all navigation stays within the correct version</li>
</ul>

<h2 class="govuk-heading-l">Example question page</h2>

    <div class="app-code-snippet app-code-snippet--copy">
      <pre data-module="app-copy"><code class="govuk-body-s">&lt;form method=&quot;post&quot; novalidate&gt;
    &lt;h1 class=&quot;govuk-heading-xl&quot;&gt;Question 1&lt;/h1&gt;
    &lt;button type=&quot;submit&quot; class=&quot;govuk-button&quot; data-module=&quot;govuk-button&quot;&gt;
        Continue
    &lt;/button&gt;
&lt;/form&gt;</code></pre>
    </div>


<p class="govuk-body">The <code class="govuk-code">&lt;form&gt;</code> element should not have an <code class="govuk-code">action</code> attribute.</p>

<h2 class="govuk-heading-l">Automatic redirects</h2>

<p class="govuk-body">This ensures that redirects always include the correct version prefix. If you call <code class="govuk-code">res.redirect('/question-2')</code>, it automatically updates to <code class="govuk-code">/v1/question-2</code> or <code class="govuk-code">/v2/question-2</code>, depending on the version.</p>

<p class="govuk-body">This code should go in the <code class="govuk-code">routing.js</code> file for each version.</p>

    <div class="app-code-snippet app-code-snippet--copy">
      <pre data-module="app-copy"><code class="govuk-body-s">module.exports = () =&gt; {
  const govukPrototypeKit = require(&#39;govuk-prototype-kit&#39;);
  const subRouter = govukPrototypeKit.requests.setupRouter();

  subRouter.use((req, res, next) =&gt; {
    const originalRedirect = res.redirect;
    res.redirect = function(url) {
      if (url.startsWith(&#39;/&#39;) &amp;&amp; !url.startsWith(req.baseUrl)) {
        url = req.baseUrl + url;
      }

      return originalRedirect.call(this, url);
    };

    next();
  });

  subRouter.post(&#39;/question-1&#39;, (req, res) =&gt; {
    res.redirect(&#39;/question-2&#39;);
  });

  subRouter.post(&#39;/question-2&#39;, (req, res) =&gt; {
    res.redirect(&#39;/question-1&#39;);
  });

  return subRouter;
};</code></pre>
    </div>


<p class="govuk-body">You must type out the full path for the question page and the redirect page (for example, <code class="govuk-code">/question-1</code> or <code class="govuk-code">/question-2</code>). You do not need to include <code class="govuk-code">v1</code> or <code class="govuk-code">v2</code>—this is handled automatically. However, if your version folder contains subdirectories, you should include the full nested path (such as, <code class="govuk-code">/nested/question-1</code>).</p>

<p class="govuk-body">The <code class="govuk-code">subRouter</code> function should be used instead of the main <code class="govuk-code">router</code> function.</p>

<p class="govuk-body">Check out the <a class="govuk-link" href="https://github.com/hmrc/govuk-prototype-kit-version-control" target="_blank">GitHub repository</a> for a working example.</p>

<h2 class="govuk-heading-l">Mounting version-specific routers</h2>

    <div class="app-code-snippet app-code-snippet--copy">
      <pre data-module="app-copy"><code class="govuk-body-s">const govukPrototypeKit = require(&#39;govuk-prototype-kit&#39;);
const router = govukPrototypeKit.requests.setupRouter();

router.use(&#39;/v1&#39;, require(&#39;./views/v1/routing&#39;)());
router.use(&#39;/v2&#39;, require(&#39;./views/v2/routing&#39;)());

module.exports = router;</code></pre>
    </div>


<p class="govuk-body">This is the <code class="govuk-code">routes.js</code> file. It mounts the <code class="govuk-code">routing.js</code> files from each version.</p>

<h2 class="govuk-heading-l">Creating a new version</h2>

<ol class="govuk-list govuk-list--number">
  <li>Duplicate the <code class="govuk-code">v2</code> folder and rename it to <code class="govuk-code">v3</code>. This will create a copy of all pages and routes, so you can update them without affecting previous versions.</li>
  <li>Open the <code class="govuk-code">routes.js</code> file and add the following line to mount your new version:
          <div class="app-code-snippet app-code-snippet--copy">
      <pre data-module="app-copy"><code class="govuk-body-s">router.use(&#39;/v3&#39;, require(&#39;./views/v3/routing&#39;)());</code></pre>
    </div>

      This ensures that requests to <code class="govuk-code">/v3</code> are handled by the <code class="govuk-code">v3</code> routing file.</li>
  <li>Edit the files inside the <code class="govuk-code">v3</code> folder to make your changes.</li>
</ol>
</div>
        </div>
      </main>
    </div>
  </div>

  

<footer class="govuk-footer">
  <div class="govuk-width-container">
    

  
  <svg
    focusable="false"
    role="presentation"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 64 60"
    height="30"
    width="32"
    fill="currentcolor" class="govuk-footer__crown"
  >
    <g>
        <circle cx="20" cy="17.6" r="3.7"/>
        <circle cx="10.2" cy="23.5" r="3.7"/>
        <circle cx="3.7" cy="33.2" r="3.7"/>
        <circle cx="31.7" cy="30.6" r="3.7"/>
        <circle cx="43.3" cy="17.6" r="3.7"/>
        <circle cx="53.2" cy="23.5" r="3.7"/>
        <circle cx="59.7" cy="33.2" r="3.7"/>
        <circle cx="31.7" cy="30.6" r="3.7"/>
        <path d="M33.1,9.8c.2-.1.3-.3.5-.5l4.6,2.4v-6.8l-4.6,1.5c-.1-.2-.3-.3-.5-.5l1.9-5.9h-6.7l1.9,5.9c-.2.1-.3.3-.5.5l-4.6-1.5v6.8l4.6-2.4c.1.2.3.3.5.5l-2.6,8c-.9,2.8,1.2,5.7,4.1,5.7h0c3,0,5.1-2.9,4.1-5.7l-2.6-8ZM37,37.9s-3.4,3.8-4.1,6.1c2.2,0,4.2-.5,6.4-2.8l-.7,8.5c-2-2.8-4.4-4.1-5.7-3.8.1,3.1.5,6.7,5.8,7.2,3.7.3,6.7-1.5,7-3.8.4-2.6-2-4.3-3.7-1.6-1.4-4.5,2.4-6.1,4.9-3.2-1.9-4.5-1.8-7.7,2.4-10.9,3,4,2.6,7.3-1.2,11.1,2.4-1.3,6.2,0,4,4.6-1.2-2.8-3.7-2.2-4.2.2-.3,1.7.7,3.7,3,4.2,1.9.3,4.7-.9,7-5.9-1.3,0-2.4.7-3.9,1.7l2.4-8c.6,2.3,1.4,3.7,2.2,4.5.6-1.6.5-2.8,0-5.3l5,1.8c-2.6,3.6-5.2,8.7-7.3,17.5-7.4-1.1-15.7-1.7-24.5-1.7h0c-8.8,0-17.1.6-24.5,1.7-2.1-8.9-4.7-13.9-7.3-17.5l5-1.8c-.5,2.5-.6,3.7,0,5.3.8-.8,1.6-2.3,2.2-4.5l2.4,8c-1.5-1-2.6-1.7-3.9-1.7,2.3,5,5.2,6.2,7,5.9,2.3-.4,3.3-2.4,3-4.2-.5-2.4-3-3.1-4.2-.2-2.2-4.6,1.6-6,4-4.6-3.7-3.7-4.2-7.1-1.2-11.1,4.2,3.2,4.3,6.4,2.4,10.9,2.5-2.8,6.3-1.3,4.9,3.2-1.8-2.7-4.1-1-3.7,1.6.3,2.3,3.3,4.1,7,3.8,5.4-.5,5.7-4.2,5.8-7.2-1.3-.2-3.7,1-5.7,3.8l-.7-8.5c2.2,2.3,4.2,2.7,6.4,2.8-.7-2.3-4.1-6.1-4.1-6.1h10.6,0Z"/>
      </g>
    
  </svg>

    
    
    <div class="govuk-footer__meta">
      <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">
        
        <svg
          aria-hidden="true"
          focusable="false"
          class="govuk-footer__licence-logo"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 483.2 195.7"
          height="17"
          width="41"
        >
          <path
            fill="currentColor"
            d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
          />
        </svg>
        <span class="govuk-footer__licence-description">
        
          All content is available under the
          <a
            class="govuk-footer__link"
            href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
            rel="license"
          >Open Government Licence v3.0</a>, except where otherwise stated
        
        </span>
      </div>
      <div class="govuk-footer__meta-item">
        <a
          class="govuk-footer__link govuk-footer__copyright-logo"
          href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
        >
        
          © Crown copyright
        
        </a>
      </div>
    </div>
  </div>
</footer>


</div>

  <script>document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');</script>
  <script src="/assets/javascripts/hmrc-design-system.js" type="module"></script>
</body>
</html>
